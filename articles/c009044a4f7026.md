---
title: "neovimを使って3ヶ月"
emoji: "🏃"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["neovim", "aerospace", "sketchybar"]
published: false
---

2024年の9月末からNeovimを触り始めて、3ヶ月が経過しました。
Neovimを使い始めてから3ヶ月経って感じたこと・メリットとデメリットなどを軽くまとめます。

# 所感

まず、Neovimでのコーディングに慣れたかと言うと2024年の12月中旬くらいには慣れていました。少なくとも、コーディングはほぼNeovim上で完結できるようになりました。ブラウザなどどうしても必要な場合以外はターミナルにこもることができるので非常に体験として良いです。特に、「コード編集〜コミット」までの流れの体験が良いです。

| すること | 以前 | 現在 |
|:---:|:---:|:---:|
| コード編集 | PyCharmなど | neovim (on WezTerm) |
| ↓ | トラックパッドでの操作 | キーボード操作 |
| ↓ | 4本指でスワイプしてmission-controlから | `space -> l -> g`を順に押下 |
| ↓ | Forkを見つけ選択する(3秒くらい) | (ほぼ0秒) |
| Git操作 | ファイルを選んでダブルクリックなどでstaging | ファイルを選んで`space`+`jk`でstaging |

文字に起こすとそうでもない気がしますが、ターミナルの中に居続けることができ対象のウィンドウを見つける煩雑さから解放されたのは大きいです。行ごとのコミットも`lazygit`で問題なくできるので、そういった点でも通常のcommitに関しては不自由なく実行できます。

そのほかの気に入っている点として、異なるリポジトリ間のエディタの移動がとても楽になりました。以前はだいたい3リポジトリくらいはPyCharmなどで開いており、集約された状態を切り替えて使っていました。その場合もマウス操作で切り替えていました（もしかしたらショートカットがあったのかもしれません）。それが今では、ターミナル上の異なるウィンドウ（WezTermにおけるペイン）でneovimを開いておき、`⌘ + Shift + j (or k)`で移動できます。また、ターミナルでのコマンド実行も同様に`⌘ + Shift + j (or k)`で切り替えて実行できるので、とても良いです。

使い始めの時は、zennの記事を書くときに使ったり、dotfilesの更新するときに使ったりしていました。9月末くらいからしばらくはdotfilesの更新くらいしか利用できていませんでしたが、12月くらいからは、使い方も慣れてきてコードの編集もできるようになってきました。ただ、最後まで慣れなかったのは、カラースキーマです。ずっとIntellijの配色に慣れていたこともあり、そこが変わってしまうと、コードが全く読めませんでした。今は、だいぶん慣れたこともあり、少しずつですが書けるようになりました。

Intellij系のエディタの文字色に慣れていたため、neovimの配色に慣れるまでに時間がかかりました。配色を頑張れば近づけることもできるのですが、一旦一番目に馴染む以下の`onenord`と言うcolorschemaを利用しています。

https://github.com/rmehri01/onenord.nvim


コンフリクト解消などのneovimであまり行わない操作については、今でもPyCharmなどの使い慣れたIDEを使用してしまいます。一応`diff-view`と言うプラグインを入れているので、neovim上で解決もできるのですが頻度が多くなく慣れたPyCharmを使ってしまいます。

# neovimのメリット・デメリット

## デメリット

以前の記事でも書きましたが、neovim以外のエディタを使用する際に`jj`や`kk`で`<esc>`を押そうとしたり、`j`や`k`でカーソル移動をしようとしてしまいます。これは、neovimの操作が体に染みついた証でもあります。

LLMを活用したコード補完（Cursor等）については、まだ十分に対応できていません。プラグインを利用することでCursorに似た機能や見た目を実現できますが、まだ改善の余地があります。一応`avante`や`parrot`を利用すればLLMを利用したコード支援は活用できます。


## メリット

キーボード操作のみで完結するエディタなので、快適にコーディングができます。矢印キーでの移動すら面倒に感じるようになりました。

キーボードだけで完結するため、コーディングへのモチベーションが上がります。

neovim以外の操作に関しても、キーボードでの操作で完結できるようになりました。

# neovim以外への影響

neovimを使っていると、ターミナルの中により篭りたくなってきます。それに伴ってエディタ以外にも快適に操作できるようにしてきました。

## zshのアップデートとキーバインドの追加

今まで、プライングマネージャとして`zinit`を利用していました。ただ、最近は`sheldon`と言うのがRustで書かれており起動も早いと言うことで乗り換えました。元々のzshの起動時間が遅かったということもあって、切り替えた直後はあまり早いと思いませんでしたが設定などを見直して、今は`50[ms]`くらいで起動するようになったので、いい感じです。

```sh
$ time zsh -i -c exit
zsh -i -c exit  0.05s user 0.05s system 71% cpu 0.148 total
```


また、指を矢印キーに持っていくのが面倒なので`Ctrl + K`が↑キーと、`Ctrl + J`が↓キーと同じ動作をするように設定を加えました。

```txt: zshrc
bindkey '^k' history-beginning-search-backward
bindkey '^j' history-beginning-search-forward
```

こうすることで、矢印キーに手を動かさなくても、直前に打ったコマンドなどを参照できるようになりました。

## モニタ・ウィンドウの切り替え

https://zenn.dev/mozumasu/articles/mozumasu-window-costomization

上記の記事を見て、`aerospace`と`sketchybar`を導入しました。

私の環境は、macに[SANWA 400-VGA023](https://direct.sanwa.co.jp/ItemPage/400-VGA023)を接続して、合計3枚のディスプレイを繋げて作業をしています。
aerospaceを使うことでシングルモニタでも作業の負担、主にウィンドウの切り替えが軽減されました。また、マルチモニタでも決まった位置に画面配置ができるようになったのでとても楽になりました。


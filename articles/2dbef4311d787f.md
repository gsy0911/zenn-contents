---
title: "Rechartsã§æ ªå¼ã®ã‚°ãƒ©ãƒ•ã‚’æ›¸ã"
emoji: "ğŸ“ˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "recharts", "stock"]
published: true
---

# ã¯ã˜ã‚ã«

Reactã«ã¯æ§˜ã€…ãªã‚°ãƒ©ãƒ•ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã‚Šã¾ã™ãŒã€
Next.jsã§æ ªå¼ã®ã‚°ãƒ©ãƒ•ï¼ˆCandleStickï¼‰ã‚’æ›¸ã“ã†ã¨ã—ãŸæ™‚ã«ã¯æ„å¤–ã¨é¸æŠè‚¢ãŒå°‘ãªã„ã§ã™ã€‚

https://zenn.dev/leftletter/articles/cdf3d30b74718c

ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€RechartsãŒä¸€ç•ªäººæ°—ãã†ã§ä½¿ã„ã‚„ã™ãã†ãªã®ã§ã™ãŒã€
ä»¥ä¸‹ã®Exampleã®ãƒšãƒ¼ã‚¸ã«ã¯å…¬å¼ã§CandleStickã¯æä¾›ã•ã‚Œã¦ã„ãªã„ã§ã™ã€‚

https://recharts.org/en-US/examples

æ®‹å¿µã â€¦ã¨æ€ã£ã¦ã„ãŸã‚‰ã€ä¸€ç•ªæœ€å¾Œã®Exampleã«ãã‚Œã£ã½ã„ã®ãŒã‚ã‚Šã¾ã—ãŸã€‚

> ![](/images/recharts_candlestick/recharts_candlestick_01.png =600x)
> *https://recharts.org/en-US/examples/CustomizedRectangleContent ã®ã‚µãƒ³ãƒ—ãƒ«ç”»åƒ*

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã‚‚ã€ã“ã®èµ¤ã¨ç·‘ã‚’ã„ã„æ„Ÿã˜ã«æ‹¡å¼µorå¿œç”¨ã™ã‚Œã°è¡Œã‘ãã†ã ãªã¨æ€ã„ã€
Rechartsã§CandleStickã‚’æ›¸ãã¾ã™ã€‚

https://codesandbox.io/s/customized-line-chart-cbd9ey?file=/src/App.tsx

# ã‚³ãƒ¼ãƒ‰ã¨å®Ÿè¡Œçµæœ

::::details ã‚³ãƒ¼ãƒ‰ã¯åœ°å‘³ã«é•·ã„ã®ã§éš ã—ã¾ã™ã€‚

```typescript jsx
import React from "react";
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
  Customized,
  Rectangle
} from "recharts";

interface IData {
  dt: string
  open: number
  high: number
  low: number
  close: number
}

const data: IData[] = [
  {
    dt: "2023/01/01",
    open: 3000,
    high: 3600,
    low: 2500,
    close: 2800
  },
  {
    dt: "2023/01/02",
    open: 3100,
    high: 3700,
    low: 2600,
    close: 2900
  },
  {
    dt: "2023/01/03",
    open: 2900,
    high: 3500,
    low: 2400,
    close: 2600
  },
  {
    dt: "2023/01/04",
    open: 3000,
    high: 3600,
    low: 2800,
    close: 3300
  },
  {
    dt: "2023/01/05",
    open: 2900,
    high: 3500,
    low: 2400,
    close: 2600
  },
];

// ã“ã“ã§èµ¤ã‹ç·‘ã®å¤ªã„ãƒãƒ¼ã‚’å‡ºã™
const CustomizedRectangleUpDown = (props: any) => {
  const {formattedGraphicalItems} = props;
  console.log(props);
  // get first and second series in chart
  const firstSeries = formattedGraphicalItems[0];
  const secondSeries = formattedGraphicalItems[1];

  // render custom content using points from the graph
  return firstSeries?.props?.points.map((_: any, index: number) => {
    const firstSeriesPoint = firstSeries?.props?.points[index];
    const secondSeriesPoint = secondSeries?.props?.points[index];
    const yDiff = firstSeriesPoint.y - secondSeriesPoint.y;

    return (
      <Rectangle
        key={index}
        width={10}
        height={-yDiff}
        x={firstSeriesPoint.x - 5}
        y={firstSeriesPoint.y}
        fill={yDiff > 0 ? "red" : yDiff < 0 ? "green" : "none"}
      />
    );
  });
};

// ã“ã“ã§é«˜å€¤ã¨åº•å€¤ã®ç´°ã„ãƒãƒ¼ã‚’å‡ºã™
const CustomizedRectangleHighLow = (props: any) => {
  const {formattedGraphicalItems} = props;
  console.log(props);
  // get first and second series in chart
  const highSeries = formattedGraphicalItems[2];
  const lowSeries = formattedGraphicalItems[3];

  // render custom content using points from the graph
  return highSeries?.props?.points.map((_: any, index: number) => {
    const firstSeriesPoint = highSeries?.props?.points[index];
    const secondSeriesPoint = lowSeries?.props?.points[index];
    const yDiff = firstSeriesPoint.y - secondSeriesPoint.y;

    return (
      <Rectangle
        key={index}
        width={2}
        height={-yDiff}
        x={firstSeriesPoint.x - 1}
        y={firstSeriesPoint.y}
        fill={"gray"}
      />
    );
  });
};

export const CandleChart = () => {
  return (
    <ResponsiveContainer width="100%" height={500}>
      <LineChart
        width={500}
        height={300}
        data={data}
        margin={{
          top: 5,
          right: 30,
          left: 20,
          bottom: 5
        }}
      >
        <CartesianGrid strokeDasharray="3 3"/>
        <XAxis dataKey="dt"/>
        <YAxis/>
        <Tooltip/>
        <Legend/>
        <Line type="monotone" dataKey="close" stroke="#8884d8"/>
        <Line type="monotone" dataKey="open" stroke="#82ca9d"/>
        <Line type="monotone" dataKey="high" stroke="none"/>
        <Line type="monotone" dataKey="low" stroke="none"/>
        <Customized component={CustomizedRectangleHighLow}/>
        <Customized component={CustomizedRectangleUpDown}/>
      </LineChart>
    </ResponsiveContainer>
  );
};

```

::::

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã™ã¨ä»¥ä¸‹ã®å›³ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![](/images/recharts_candlestick/recharts_candlestick_02.png =600x)


ç´«ã¨ç·‘ã®ç·šãŒæ°—ã«ãªã‚‹å ´åˆã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«`stroke="none"`ã§ç·šã‚’æ¶ˆã™ã“ã¨ãŒã§ãã¾ã™ã€‚
ã•ã‚‰ã«`<Legend/>`ã‚’æ¶ˆã™ã“ã¨ã§ä¸‹ã®å‡¡ä¾‹ã‚‚æ¶ˆã™ã“ã¨ãŒã§ãã¾ã™ã€‚
ï¼ˆCandleStickãªã‚‰å‡¡ä¾‹ãŒç„¡ãã¦ã‚‚åˆ†ã‹ã‚‹ã ã‚ã†ã¨ã„ã†åˆ¤æ–­ã§ã™ï¼‰ã€‚

```diff typescript jsx
-        <Legend/>
-        <Line type="monotone" dataKey="close" stroke="#8884d8"/>
-        <Line type="monotone" dataKey="open" stroke="#82ca9d"/>
+        <Line type="monotone" dataKey="close" stroke="none"/>
+        <Line type="monotone" dataKey="open" stroke="none"/>
```

![](/images/recharts_candlestick/recharts_candlestick_03.png =600x)


# ãŠã‚ã‚Šã«

Rechartsã§CandleStickã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚æ¡ˆå¤–æ¥½ã«ã‹ã‘ãŸã®ã§ã‚ˆã‹ã£ãŸã§ã™ã€‚

ä½™è«‡ï¼šä»–ã«ã‚‚[APEXCHARTS](https://apexcharts.com/react-chart-demos/candlestick-charts/combo/)ã‚„ã€[ã“ã®è¨˜äº‹](https://zenn.dev/satoshi_tech/articles/20230507-apache-echarts-marker)ã‚’å‚è€ƒã«[Appache Echarts](https://echarts.apache.org/examples/en/index.html#chart-type-candlestick)ã¨ã‹ã¯è¦‹ãŸã®ã§ã™ãŒã€
ã‚³ãƒ¼ãƒ‰ä¾‹ãŒã‚ã¾ã‚Šç§ã«ã¨ã£ã¦ã‚ˆããªã‹ã£ãŸã®ã§ã‚„ã‚ã¾ã—ãŸã€‚

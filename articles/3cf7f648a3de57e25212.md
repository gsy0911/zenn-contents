---
title: "SAM CLIを試してみた"
emoji: "💨"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["AWS", "CDK"]
published: false
---

:::message alert
本内容はパブリックプレビュー版です。今後の更新で変更があるかもしれません。
:::


# はじめに

ある日、TLをぼんやり眺めているとこんな記事が流れて来ました。

https://twitter.com/_kensh/status/1387972711855525892?s=20

初めてみたときは、`AWS SAM`に目がいってあまり気にしていませんでした。
よくみてみると、これからAWSを触っていくにあたってすごく気になることが書かれていました。

# アツい内容

何がすごいのかは、[元記事](https://aws.amazon.com/jp/blogs/compute/better-together-aws-sam-and-aws-cdk/) のこの文に詰まっています。

>  Before today, you could use the AWS SAM CLI to build locally, test, and package serverless applications defined using AWS CloudFormation or AWS SAM templates. With this preview release, you can use AWS SAM CLI to build, test, and in the future, package applications defined using the AWS CDK.

AWS CDKで構築したAWSのサーバーレスサービス群を、AWS SAMを利用してローカルで色々できるみたいです！

私は今まで、AWS CDKを利用していたのですが、AWS側にデプロイする用途でしか利用できず、ローカルでのテストや実行ができていませんでした。
そのほかの有名なパッケージ、`terraform`ならローカルでのテストも確かできたと思うのですが、yaml形式で記述しなければならず、私は苦手でした。
加えて公式ではないため、（公式に匹敵するくらい有名・利用されているのは知っていますが）あまり利用に気が進みませんでした。

# 試してみる

:::message alert
（再掲）本内容はパブリックプレビュー版です。今後の更新で変更があるかもしれません。
:::

上記のページにもサンプルはありますが、自力でもろもろやってみようかと思います。

## 準備・インストール・環境設定

[このページ](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-cdk.html) を参考に必要なパッケージを入れていきます。

必要なツールは以下の3つです。

- [AWS CLI](https://aws.amazon.com/cli/)
- [AWS CDK](https://docs.aws.amazon.com/cdk/latest/guide/getting_started.html)
- [AWS SAM CLI - beta](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-cdk.html)

私の環境・バージョンは次の通りです。

- OS: macOS Big Sur (11.3), intel
- AWS CLI: aws-cli/2.2.3 Python/3.9.5 Darwin/20.4.0 source/x86_64 prompt/off
- AWS CDK: 1.102.0 (build a75d52f)

CLIとCDKはあらかじめ入っていたので、`AWS SAM CLI - beta`のみbrewにて入れていきます。

```shell
$ brew install aws-sam-cli-beta-cdk
```
